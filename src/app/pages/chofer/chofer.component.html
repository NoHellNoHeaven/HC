<app-navbar></app-navbar>

<div class="choferes-container">
  <!-- LISTA DE CHOFERES -->
  <div class="choferes-list">
    <h2>Lista de Choferes</h2>

    <input type="text" class="buscador" placeholder="Buscar por RUT o nombre..." [(ngModel)]="busqueda" />

    <table>
      <thead>
        <tr>
          <th>RUT</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Email</th>
          <th>Teléfono</th>
          <th>Licencia</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let chofer of choferesFiltrados">
          <td>{{ chofer.rut }}</td>
          <td>{{ chofer.nombre }}</td>
          <td>{{ chofer.p_apellido }}</td>
          <td>{{ chofer.email }}</td>
          <td>{{ chofer.telefono }}</td>
          <td>{{ chofer.licencia }}</td>
          <td>
            <button type="button" class="btn-editar" (click)="editarChofer(chofer)">Editar</button>
            <button type="button" class="btn-eliminar" (click)="eliminarChofer(chofer)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>

    <button class="btn-agregar" (click)="abrirAgregarChofer()">Agregar Chofer</button>
  </div>
</div>

<!-- MODAL AGREGAR CHOFER -->
<div class="modal-overlay" *ngIf="mostrarFormularioAgregar">
  <div class="modal">
    <h2>Agregar Nuevo Chofer</h2>
    <form (ngSubmit)="agregarChofer()" #choferForm="ngForm">
      <label for="rut">RUT</label>
      <input type="text" id="rut" placeholder="RUT" [(ngModel)]="nuevoChofer.rut" name="rut" required />

      <label for="nombre">Nombre</label>
      <input type="text" id="nombre" placeholder="Nombre" [(ngModel)]="nuevoChofer.nombre" name="nombre" required />

      <label for="p_apellido">Apellido</label>
      <input type="text" id="p_apellido" placeholder="Apellido" [(ngModel)]="nuevoChofer.p_apellido" name="p_apellido" required />

      <label for="email">Email</label>
      <input type="email" id="email" placeholder="Email" [(ngModel)]="nuevoChofer.email" name="email" required />

      <label for="password">Password</label>
      <input type="password" id="password" placeholder="Password" [(ngModel)]="nuevoChofer.password" name="password" required />

      <label for="telefono">Teléfono</label>
      <input type="text" id="telefono" placeholder="Teléfono" [(ngModel)]="nuevoChofer.telefono" name="telefono" required />

      <label for="licencia">Licencia</label>
      <input type="text" id="licencia" placeholder="Licencia" [(ngModel)]="nuevoChofer.licencia" name="licencia" required />

      <div class="modal-buttons">
        <button type="submit" [disabled]="!choferForm.form.valid">Agregar</button>
        <button type="button" (click)="cancelarAgregar()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- MODAL EDICIÓN -->
<div class="modal-overlay" *ngIf="mostrarFormularioEdicion">
  <div class="modal">
    <h2>Editar Chofer</h2>
    <form (ngSubmit)="guardarEdicion()">
      <label for="rutEdit">RUT</label>
      <input type="text" id="rutEdit" [(ngModel)]="choferEditado.rut" name="rut" readonly />

      <label for="nombreEdit">Nombre</label>
      <input type="text" id="nombreEdit" [(ngModel)]="choferEditado.nombre" name="nombre" required />

      <label for="p_apellidoEdit">Apellido</label>
      <input type="text" id="p_apellidoEdit" [(ngModel)]="choferEditado.p_apellido" name="p_apellido" required />

      <label for="emailEdit">Email</label>
      <input type="email" id="emailEdit" [(ngModel)]="choferEditado.email" name="email" required />

      <label for="passwordEdit">Password</label>
      <input type="password" id="passwordEdit" [(ngModel)]="choferEditado.password" name="password" />

      <label for="telefonoEdit">Teléfono</label>
      <input type="text" id="telefonoEdit" [(ngModel)]="choferEditado.telefono" name="telefono" required />

      <label for="licenciaEdit">Licencia</label>
      <input type="text" id="licenciaEdit" [(ngModel)]="choferEditado.licencia" name="licencia" readonly />

      <div class="modal-buttons">
        <button type="submit">Guardar</button>
        <button type="button" (click)="cancelarEdicion()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
