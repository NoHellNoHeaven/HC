<app-navbar></app-navbar>

<div class="alert-header">
  ‚ö†Ô∏è Alertas de Mantenimiento
</div>
<p class="alert-subtext">
  Mantenimientos pendientes y pr√≥ximos vencimientos
</p>

<!-- üî¥ Mantenciones Pendientes -->
<h2>Mantenciones Pendientes</h2>
<div class="mantenciones-list">
  <div *ngIf="mantencionesPendientes.length === 0" class="no-mantenciones">
    <div class="no-mantenciones-content">
      <p class="no-mantenciones-text">No hay mantenciones pendientes por el momento</p>
    </div>
  </div>
  <div *ngFor="let mantencion of mantencionesPendientes" class="mantencion-item critica">
    <div class="mantencion-top">
      <div class="mantencion-info">
        <h3 class="patente">{{ mantencion.nombre }}</h3>
        <span class="badge badge-critico">{{ mantencion.criticidad }}</span>
        <span class="tipo">{{ mantencion.tipo }}</span>
        <p class="descripcion">{{ mantencion.descripcion }}</p>
        
        <!-- Nueva l√≠nea minimalista de kilometraje -->
        <div class="km-line">
          <span class="km-text">Programado: {{ mantencion.kmProgramado | number }} km</span>
          <span class="km-separator">‚Ä¢</span>
          <span class="km-text">Actual: {{ mantencion.kmActual | number }} km</span>
          <span class="km-separator">‚Ä¢</span>
          <span class="km-status" [ngClass]="getKmStatusClass(mantencion)">
            {{ getKmStatusText(mantencion) }}
          </span>
        </div>
      </div>
      <div class="mantencion-fecha" *ngIf="mantencion.fecha">
        <strong>Vencimiento</strong><br />
        <span>{{ mantencion.fecha | date:'d/M/yyyy' }}</span>
      </div>
    </div>
    <div class="acciones">
      <button class="button">
        Programar Mantenimiento
      </button>
      <button class="button button-light" (click)="confirmarMantencion(mantencion)">
        Marcar como Completado
      </button>

    </div>
  </div>
</div>

<!-- üü° Mantenciones Pr√≥ximas -->
<h2>Mantenciones Pr√≥ximas</h2>
<div class="mantenciones-list">
  <div *ngIf="mantencionesProximas.length === 0" class="no-mantenciones">
    <div class="no-mantenciones-content">
      <p class="no-mantenciones-text">No hay mantenciones pr√≥ximas programadas</p>
    </div>
  </div>
  <div *ngFor="let mantencion of mantencionesProximas" class="mantencion-item proxima">
    <div class="mantencion-top">
      <div class="mantencion-info">
        <h3 class="patente">{{ mantencion.nombre }}</h3>
        <span class="tipo">{{ mantencion.tipo }}</span>
        <p class="descripcion">{{ mantencion.descripcion }}</p>
        
        <!-- Nueva l√≠nea minimalista de kilometraje para pr√≥ximas -->
        <div class="km-line">
          <span class="km-text">Programado: {{ mantencion.kmProgramado | number }} km</span>
          <span class="km-separator">‚Ä¢</span>
          <span class="km-text">Actual: {{ mantencion.kmActual | number }} km</span>
          <span class="km-separator">‚Ä¢</span>
          <span class="km-status km-status-pending">
            {{ getKmStatusText(mantencion) }}
          </span>
        </div>
      </div>
      <div class="mantencion-fecha" *ngIf="mantencion.fecha">
        <strong>Fecha</strong><br />
        <span>{{ mantencion.fecha | date:'d/M/yyyy' }}</span>
      </div>
    </div>
  </div>
</div>
<!-- Modal de confirmaci√≥n -->
<div *ngIf="mostrarModal" class="modal-backdrop" (click)="cancelarConfirmacion()">
  <div class="modal" (click)="$event.stopPropagation()">
    <h3>¬øConfirmar mantenimiento?</h3>
    <p>¬øDeseas marcar esta mantenci√≥n como completada?</p>
    <div class="acciones">
      <button class="button button-light" (click)="cancelarConfirmacion()">Cancelar</button>
      <button class="button" (click)="completarMantencion()">Confirmar</button>
    </div>
  </div>
</div>

